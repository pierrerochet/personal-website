<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-ml-spam-filter-fr">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Spam filter | Pierre Rochet</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/docs/ml-spam-filter-fr"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Spam filter | Pierre Rochet"><meta data-rh="true" name="description" content="âœ¨ Try it"><meta data-rh="true" property="og:description" content="âœ¨ Try it"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/docs/ml-spam-filter-fr"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/docs/ml-spam-filter-fr" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/docs/ml-spam-filter-fr" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.60100dba.css">
<link rel="preload" href="/assets/js/runtime~main.d3b91c92.js" as="script">
<link rel="preload" href="/assets/js/main.f3501881.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">Pierre Rochet</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/ml-spam-filter-fr">Projects</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/pierrerochet" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/ml-spam-filter-fr">Spam filter</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Spam filter</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Spam filter</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-try-it">âœ¨ Try it<a class="hash-link" href="#-try-it" title="Direct link to heading">â€‹</a></h2><div><form class="mb-8"><div class="mb-4"><div class="flex justify-between"><label class="block">text</label><select class="p-1 bg-transparent border-x-2 border-t-2 border-b-0 rounded-t-sm border-solid"><option value="On se retrouve Ã  14h pour la rÃ©union avec nos partenaires">Example legit</option><option value="Vous avez gagnÃ© un cadeau, cliquez ici pour le recevoir !">Example spam</option></select></div><textarea name="text" class="border-2 border-solid rounded-sm rounded-tr-none w-full h-32 px-1 resize-none font-sans m-0" placeholder="Type the content of an email ...">On se retrouve Ã  14h pour la rÃ©union avec nos partenaires</textarea></div><div class="mb-4"><label for="strength" class="block">strength</label><input type="number" class="border-2 rounded-sm w-20 border-solid" name="strength" step="0.1" min="0" max="10" value="5"></div><button type="submit" class="button button--outline button--active button--primary">Run</button></form></div><hr><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>All the documentation below comes directly from the project&#x27;s Readme available on <span><a href="https://github.com/pierrerochet/ml-spam-filter-fr" class="inline-flex justify-items-center"><span>GitHub</span><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" class="ml-2" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></span></p></div></div><h1>Spam filter with machine learning</h1><figure><img loading="lazy" src="https://raw.githubusercontent.com/pierrerochet/ml-spam-filter-fr/master/assets/email.png" alt="email" class="img_ev3q"><figcaption align="center"><i>Image by <a href="https://pixabay.com/fr/users/tumisu-148124/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=2362038" target="_blank" rel="noopener noreferrer">Tumisu</a></i></figcaption></figure><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-objective-and-motivation">ğŸ”¥ Objective and motivation<a class="hash-link" href="#-objective-and-motivation" title="Direct link to heading">â€‹</a></h2><p>Build a <strong>spam filter</strong> with <strong>machine learning</strong> for <strong>french</strong>.</p><p>The fight against spamming is both one of the oldest computer security problems and one that has been successfully solved through machine learning.</p><p>Envisionning and building such a system is a rewarding experience for those interested in applying machine learning to computer security. This project is therefore mainly for <strong>educational purpose</strong>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-tools-and-knowledge">ğŸ“š Tools and knowledge<a class="hash-link" href="#-tools-and-knowledge" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-tools">ğŸ›  Tools<a class="hash-link" href="#-tools" title="Direct link to heading">â€‹</a></h3><ul><li><a href="https://scikit-learn.org/stable/" target="_blank" rel="noopener noreferrer">Sklearn</a> - A python library for traditionnal machine-learning</li><li><a href="https://fastapi.tiangolo.com/" target="_blank" rel="noopener noreferrer">FastAPI</a> - A python micro framework to quickly build APIs</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-knowledge">ğŸ“– Knowledge<a class="hash-link" href="#-knowledge" title="Direct link to heading">â€‹</a></h3><ul><li>Python development skill</li><li><a href="https://en.wikipedia.org/wiki/Tf%E2%80%93idf" target="_blank" rel="noopener noreferrer">TF-IDF</a> for text vectorization</li><li><a href="https://en.wikipedia.org/wiki/Support_vector_machine" target="_blank" rel="noopener noreferrer">Linear Support vector machine</a> and <a href="https://en.wikipedia.org/wiki/Stochastic_gradient_descent" target="_blank" rel="noopener noreferrer">Stochastic Gradient Descent</a> for model training</li><li>API development to serve the model</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-project-structure">ğŸ§© Project structure<a class="hash-link" href="#-project-structure" title="Direct link to heading">â€‹</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ Makefile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ Procfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ main.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ ml_models</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â””â”€â”€ spam-filter-latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚       â””â”€â”€ model.pkl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ models.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ requirements.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ runtime.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ test_main.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€ utils.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ assets</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€ email.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€ data-en-hi-de-fr.csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ notebooks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€ build-model.ipynb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€ requirements.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><table><thead><tr><th>Folder</th><th>Description</th></tr></thead><tbody><tr><td>app</td><td>api source code for deployment</td></tr><tr><td>ml_models</td><td>machine-learning models trained and loaded when the application starts</td></tr><tr><td>data</td><td>data used during training</td></tr><tr><td>notebooks</td><td>contains the notebooks for data manipulation and model training</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-how-use-it">ğŸ— How use it<a class="hash-link" href="#-how-use-it" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-install-dependencies">â›° Install dependencies<a class="hash-link" href="#-install-dependencies" title="Direct link to heading">â€‹</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pip </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> -r requirements.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note - We recommend doing this in a vitual environment.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-start-the-api">ğŸš€ Start the API<a class="hash-link" href="#-start-the-api" title="Direct link to heading">â€‹</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">uvicorn app.main:app</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The documentation can be found at this url <a href="http://127.0.0.1:8000/docs" target="_blank" rel="noopener noreferrer">http://127.0.0.1:8000/docs</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-request-example">âœ¨ Request example<a class="hash-link" href="#-request-example" title="Direct link to heading">â€‹</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -X </span><span class="token string" style="color:#e3116c">&#x27;POST&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;http://127.0.0.1:8000/verify&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H </span><span class="token string" style="color:#e3116c">&#x27;accept: application/json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H </span><span class="token string" style="color:#e3116c">&#x27;Content-Type: application/json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&#x27;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;text&quot;: &quot;Vous avez gagnÃ© un cadeau ! Recevez votre gain en cliquant ici !&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>will return</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;is_spam&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;strength&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;confidence&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.921</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;input_text&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Vous avez gagnÃ© un cadeau ! Recevez votre gain en cliquant ici !&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2022-10-26 17:07:04&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-data-used-in-the-project">ğŸ’ Data used in the project<a class="hash-link" href="#-data-used-in-the-project" title="Direct link to heading">â€‹</a></h2><p>You can dowload the spam data on <a href="https://www.kaggle.com/datasets/rajnathpatel/multilingual-spam-data?resource=download" target="_blank" rel="noopener noreferrer">Kaggle</a><br>
<!-- -->Author - <a href="https://www.kaggle.com/rajnathpatel" target="_blank" rel="noopener noreferrer">Raj Nath Patel</a></p><p>These are 5134 French text from emails, split into 3593 for training and 1541 for testing (30 %).</p><p>The original text was in English and Machine Translated to French. The dataset therefore contains some inconsistencies in meaning due to translation errors.</p><p>The data only provides the body of the email in raw text, which means that we do not have the sender email address or any other metadata.</p><p>Below an example:</p><blockquote><p>&quot;En tant que client apprÃ©ciÃ©, je suis heureux de vous informer qu&#x27;Ã  la suite d&#x27;un rÃ©cent examen de votre Mob No. vous Ãªtes rÃ©compensÃ© avec un Prix Bonus Â£1500, appelez 09066364589&quot;</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-performances">ğŸ“ˆ Performances<a class="hash-link" href="#-performances" title="Direct link to heading">â€‹</a></h2><table><thead><tr><th></th><th>precision</th><th>recall</th><th>f1-score</th><th>support</th></tr></thead><tbody><tr><td>ham</td><td>0.99</td><td>1.00</td><td>0.99</td><td>1349</td></tr><tr><td>spam</td><td>0.98</td><td>0.91</td><td>0.94</td><td>192</td></tr></tbody></table><p>Note - The <strong>test data is 30%</strong> of the total data.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-choices-made-in-the-project">ğŸ’¡ Choices made in the project<a class="hash-link" href="#-choices-made-in-the-project" title="Direct link to heading">â€‹</a></h2><p>Here, we tried to respond to most frequently asked questions and justify choices made in the project.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-why-a-spam-filter-for-french-language--">ğŸ‘‰ Why a spam filter for French language ? ğŸ‡«ğŸ‡·<a class="hash-link" href="#-why-a-spam-filter-for-french-language--" title="Direct link to heading">â€‹</a></h3><p>Because French is a beautiful language ğŸ˜‰</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-why-use-a-linear-svm-and-stochastic-descent-gradient-for-model-training-">ğŸ‘‰ Why use a linear SVM and Stochastic Descent Gradient for model training ?<a class="hash-link" href="#-why-use-a-linear-svm-and-stochastic-descent-gradient-for-model-training-" title="Direct link to heading">â€‹</a></h3><p>Historically, Linear SVM performs well on large datasets for relatively fast training time. It is therefore particularly suitable for textual data.</p><p>We selected it for its good performance compared to the other algorithms we tested.</p><p>Using SGD for convergence allows us iterative learning. This strategy is useful for updating our model with new observations (see <a href="https://scikit-learn.org/stable/modules/generated/sklearn.linear_model.SGDClassifier.html#sklearn.linear_model.SGDClassifier.partial_fit" target="_blank" rel="noopener noreferrer">partial_fit</a>).</p><p>The performance is good enough not to consider heavier architecture based on neural networks. In addition, we have chosen to favor a light and easy to handle model.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-why-do-a-probability-calibration-">ğŸ‘‰ Why do a probability calibration ?<a class="hash-link" href="#-why-do-a-probability-calibration-" title="Direct link to heading">â€‹</a></h3><blockquote><p>When performing classification you often want not only to predict the class label, but also obtain a probability of the respective label. This probability gives you some kind of confidence on the prediction. Some models can give you poor estimates of the class probabilities and some even do not support probability prediction (e.g., some instances of SGDClassifier). The calibration module allows you to better calibrate the probabilities of a given model, or to add support for probability prediction.</p><p>-- <a href="https://scikit-learn.org/stable/modules/calibration.html" target="_blank" rel="noopener noreferrer"><em>Sklearn documentation</em></a></p></blockquote><p>Although not required, we want a <strong>confidence score</strong> in order to <strong>manage the filter strength</strong> in the service.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-why-use-fastapi-to-build-the-api-">ğŸ‘‰ Why use FastAPI to build the API ?<a class="hash-link" href="#-why-use-fastapi-to-build-the-api-" title="Direct link to heading">â€‹</a></h3><blockquote><p>FastAPI is a modern, fast (high-performance), web framework for building APIs with Python 3.7+ based on standard Python type hints.</p><p>-- <a href="https://fastapi.tiangolo.com/" target="_blank" rel="noopener noreferrer"><em>FastAPI Documentation</em></a></p></blockquote><p>FastAPI is the python framework allowing to build API in the <strong>fastest</strong> manner.</p><p><strong>Easy to learn, based on standard python type, and automatically generating the documentation</strong> are some of its many advantages.</p><p>For building ML service in python it has become a standard choice in many projects.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-how-to-improve-the-project-">ğŸª„ How to improve the project ?<a class="hash-link" href="#-how-to-improve-the-project-" title="Direct link to heading">â€‹</a></h2><p>First, the use of native French data could improve post-deployment spam detection.</p><p>Another good option would be to find email dataset with additional elements such as sender address, url, html code, attachments, etc. We believe that these elements would be instrumental in building very good features to discriminate against spam.</p><p>Depending on the data at our disposal, other algorithms would be required for training. For example, more complex methods based on neural networks should work better for inspecting attachements.</p><p>Combining these improvements could make a very powerful anti spam. But the project would also be much more difficult to develop.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="author">Author<a class="hash-link" href="#author" title="Direct link to heading">â€‹</a></h3><p><a href="https://github.com/pierrerochet" target="_blank" rel="noopener noreferrer">Pierre ROCHET</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/ml-spam-filter-fr.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#-try-it" class="table-of-contents__link toc-highlight">âœ¨ Try it</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"></div></footer></div>
<script src="/assets/js/runtime~main.d3b91c92.js"></script>
<script src="/assets/js/main.f3501881.js"></script>
</body>
</html>